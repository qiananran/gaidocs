import{_ as n,o as l,c as p,x as s,a as e,t as o,U as r}from"./chunks/framework.7f50b160.js";const B=JSON.parse('{"title":"安装","description":"","frontmatter":{"title":"安装"},"headers":[],"relativePath":"ros/base/install.md","lastUpdated":null}'),t={name:"ros/base/install.md"},c={id:"frontmatter-title",tabindex:"-1"},i=s("a",{class:"header-anchor",href:"#frontmatter-title","aria-label":'Permalink to "{{ $frontmatter.title }}"'},"​",-1),E=r(`<div class="info custom-block"><p class="custom-block-title">INFO</p><p>整体而言，ROS2的安装步骤不算复杂，大致步骤如下：</p><pre><code>准备1：设置语言环境；
准备2：启动Ubuntu universe存储库；
设置软件源；
安装ROS2；
配置环境。
</code></pre><p>请注意：虽然安装比较简单，但是安装过程比较耗时，需要耐心等待。</p></div><h2 id="准备1-设置语言环境" tabindex="-1">准备1：设置语言环境 <a class="header-anchor" href="#准备1-设置语言环境" aria-label="Permalink to &quot;准备1：设置语言环境&quot;">​</a></h2><p>请先检查本地语言环境是否支持UTF-8编码，可调用如下指令检查并设置UTF-8编码：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">locale</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 检查是否支持 UTF-8</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">update</span><span style="color:#E1E4E8;"> &amp;&amp; </span><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">locales</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">locale-gen</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">en_US</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">en_US.UTF-</span><span style="color:#79B8FF;">8</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">update-locale</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">LC_ALL=en_US.UTF-</span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">LANG=en_US.UTF-</span><span style="color:#79B8FF;">8</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> LANG</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">en_US.UTF-</span><span style="color:#79B8FF;">8</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">locale</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 验证设置是否成果</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>注意：语言环境可以不同，但必须支持UTF-8编码。</p><h2 id="准备2-启动ubuntu-universe存储库" tabindex="-1">准备2：启动Ubuntu universe存储库 <a class="header-anchor" href="#准备2-启动ubuntu-universe存储库" aria-label="Permalink to &quot;准备2：启动Ubuntu universe存储库&quot;">​</a></h2><p>方式：命令行操作</p><p>首先，通过如下命令检查是否已经启动了Ubuntu universe存储库：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">apt-cache</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">policy</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">universe</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">500</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">http://us.archive.ubuntu.com/ubuntu</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">jammy/universe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">amd64</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Packages</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#B392F0;">release</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">v=</span><span style="color:#79B8FF;">22.04</span><span style="color:#9ECBFF;">,o=Ubuntu,a=jammy,n=jammy,l=Ubuntu,c=universe,b=amd64</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果没有如上所示的输出，那么请调用如下命令启动Ubuntu universe存储库：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">software-properties-common</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">add-apt-repository</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">universe</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="设置软件源" tabindex="-1">设置软件源 <a class="header-anchor" href="#设置软件源" aria-label="Permalink to &quot;设置软件源&quot;">​</a></h2><p>先将ROS 2 apt存储库添加到系统，用apt授权我们的GPG密钥：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">update</span><span style="color:#E1E4E8;"> &amp;&amp; </span><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">curl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">gnupg</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">lsb-release</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">curl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-sSL</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://raw.githubusercontent.com/ros/rosdistro/master/ros.key</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-o</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/share/keyrings/ros-archive-keyring.gpg</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>然后将存储库添加到源列表：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#79B8FF;">echo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;deb [arch=$(</span><span style="color:#B392F0;">dpkg</span><span style="color:#9ECBFF;"> </span><span style="color:#79B8FF;">--print-architecture</span><span style="color:#9ECBFF;">) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu $(</span><span style="color:#79B8FF;">source</span><span style="color:#9ECBFF;"> /etc/os-release &amp;&amp; </span><span style="color:#79B8FF;">echo</span><span style="color:#9ECBFF;"> </span><span style="color:#E1E4E8;">$UBUNTU_CODENAME</span><span style="color:#9ECBFF;">) main&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">tee</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/apt/sources.list.d/ros2.list</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/dev/null</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="安装ros2" tabindex="-1">安装ROS2 <a class="header-anchor" href="#安装ros2" aria-label="Permalink to &quot;安装ROS2&quot;">​</a></h2><p>首先更新apt存储库缓存：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">update</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>然后升级已安装的软件(ROS2软件包建立在经常更新的Ubuntu系统上，在安装新软件包之前请确保您的系统是最新的)：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">upgrade</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>安装桌面版ROS2(建议)，包含：ROS、RViz、示例与教程，安装命令如下：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ros-humble-desktop</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>或者，也可以安装基础版ROS2，包含：通信库、消息包、命令行工具，但是没有 GUI 工具，安装命令如下：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ros-humble-ros-base</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="配置环境" tabindex="-1">配置环境 <a class="header-anchor" href="#配置环境" aria-label="Permalink to &quot;配置环境&quot;">​</a></h2><p>终端下，执行ROS2程序时，需要调用如下命令配置环境：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#79B8FF;">source</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/opt/ros/humble/setup.bash</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>每次新开终端时，都得执行上述命令，或者也可以执行如下命令，将配置环境指令写入 ”~/.bashrc“ 文件，那么每次新启动终端时，不需要在手动配置环境：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#79B8FF;">echo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;source /opt/ros/humble/setup.bash&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/.bashrc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>到目前为止，ROS2就已经安装且配置完毕了。</p><h2 id="测试ros2" tabindex="-1">测试ROS2 <a class="header-anchor" href="#测试ros2" aria-label="Permalink to &quot;测试ROS2&quot;">​</a></h2><p>在ROS2中已经内置了一些案例，安装完毕之后，就可以运行这些案例，以测试ROS2的安装与配置是否正常，在此，我们选用ROS2内置的小乌龟案例，具体操作如下。</p><p>1.打开两个终端(可以使用快捷键Ctrl + Alt + T)；</p><p>2.终端1中输入指令：<code>ros2 run turtlesim turtlesim_node</code>，执行完毕，会启动一个绘有小乌龟的窗口；</p><p>3.终端2中输入指令：<code>ros2 run turtlesim turtle_teleop_key</code>，执行完毕，可以在此终端中通过键盘控制乌龟运动。</p><h2 id="安装colcon构建工具" tabindex="-1">安装colcon构建工具 <a class="header-anchor" href="#安装colcon构建工具" aria-label="Permalink to &quot;安装colcon构建工具&quot;">​</a></h2><p>colcon是一个命令行工具，用于改进编译，测试和使用多个软件包的工作流程。它实现过程自动化，处理需求并设置环境以便于使用软件包。ROS2中便是使用colcon作为包构建工具的，但是ROS2中没有默认安装colcon，需要自行安装，安装命令如下：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">python3-colcon-common-extensions</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="关于-raw-githubusercontent-com-连接失败的处理" tabindex="-1">关于 raw.githubusercontent.com 连接失败的处理 <a class="header-anchor" href="#关于-raw-githubusercontent-com-连接失败的处理" aria-label="Permalink to &quot;关于 raw.githubusercontent.com 连接失败的处理&quot;">​</a></h2><p>安装ROS2过程中，执行到设置软件源时，可能会抛出异常。</p><div class="danger custom-block"><p class="custom-block-title">DANGER</p><p>异常提示：curl: (7) Failed to connect to raw.githubusercontent.com port 443: 拒绝连接。</p></div><p>异常原因：DNS被污染。</p><p>解决思路：查询错误提示中域名的IP地址，然后修改 /etc/hosts 文件，添加域名与IP映射。</p><p>具体实现：</p><p>1.访问 <a href="https://www.ipaddress.com/" target="_blank" rel="noreferrer">https://www.ipaddress.com/</a> 并输入域名 raw.githubusercontent.com，查询 ip 地址。</p><p>查询到的ip地址可能有多个，记录任意一个地址即可。</p><p>2.修改/etc/hosts文件：</p><div class="language-sh line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">gedit</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/hosts</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>添加ip和域名映射到hosts文件，保存并退出。</p><p>操作完毕后，终端再次运行安装指令即可正常执行</p>`,51);function u(a,d,y,F,b,h){return l(),p("div",null,[s("h1",c,[e(o(a.$frontmatter.title)+" ",1),i]),E])}const C=n(t,[["render",u]]);export{B as __pageData,C as default};
